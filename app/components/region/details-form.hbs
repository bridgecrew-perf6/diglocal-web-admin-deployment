<div class="dig-card">
  <div class="flex mb-3 justify-between">
    <h1 class="dig-section-title">
      {{if this.isReadonly @model.longName "Edit Region"}}
    </h1>
    {{#if this.isReadonly}}
      <CrunchyButton
        @onClick={{action (mut this.isEditing) (not this.isEditing)}}
        @class="crunchy-button--icon"
        @aria-label="Edit region details">
        <FaIcon @icon="edit" @size="lg" />
      </CrunchyButton>
    {{else}}
      <CrunchyButton
        @onClick={{action "cancel"}}
        @class="crunchy-button--icon"
        @aria-label="Close form">
        <FaIcon @icon="times" @size="lg" />
      </CrunchyButton>
    {{/if}}
  </div>

  <CrunchyForm
    @model={{@model}}
    @formSchema={{@model.validationSchema}}
    @onSubmit={{action "save"}}
    @onCancel={{action "cancel"}}
    @isReadonly={{this.isReadonly}}
    @debounceSubmit={{true}}
    as |form|>

    <form.text-field
      @field="name"
      @label="Name"
      @aria-label="Short name"
    />

    <form.text-field
      @field="longName"
      @label="Long Name"
      @aria-label="Long Name"
    />

    <form.text-field
      @field="timeZone"
      @label="Time Zone"
      @aria-label="Time zone"
      @disabled={{true}}
    />

    <fieldset name="Default Location Details" class="border p-4 rounded">
      <label for="Default Location Details" class="mb-2 font-semibold text-lg block text-brand-primary">
        Default Location
      </label>
      <p class="mb-2 text-sm">Edit the default values for newly created business locations.<br>If a business has no location address specified, these values will be used for the location display, mapping, etc.</p>
      <div class="w-full flex">
        <div class="mr-4 flex-grow">
          <form.text-field
            @field="defaultCity"
            @label="City"
            @autocomplete="address-level2"
          />
        </div>

        <div class="mr-4 w-48 flex-shrink">
          <form.text-field
            @field="defaultState"
            @label="State"
            @autocomplete="address-level1"
          />
        </div>

        <div class="w-32 flex-shrink">
          <form.text-field
            @field="defaultZip"
            @label="Postal Code"
            @autocomplete="postal-code"
          />
        </div>
      </div>
    </fieldset>

    <form.errors @errorHeading="Unable to save due to the following errors:" />

    {{#if this.isEditing}}
      <div class="flex justify-end mt-8">
        <div class="flex flex-wrap">
          <form.submit @value="Submit" @class="mr-2 md:w-32" @testId="save-region" />
          <form.cancel @value="Cancel" />
        </div>
      </div>
    {{/if}}
  </CrunchyForm>
</div>
